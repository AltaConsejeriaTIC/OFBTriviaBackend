swagger: "2.0"
info:
  version: 0.0.1
  title: Trivia OFB
# during dev, should point to your local machine
host: localhost:10011
schemes:
  - http
consumes:
  - application/json
produces:
  - application/json
basePath: /trivia


definitions:
  
  QuestionInfo:
    type: object
    properties:
      content:
        type: [string, 'null']
      endDate:
        type: [string, 'null']
  
  Winners:
    type: object
    properties:
      date:
        type: string
      winners:
        type: array
        items:
          type: string
  
  CitizenAnswer:
    type: object
    properties:
      name:
        type: string
      lastName:
        type: string
      email:
        type: string
      cellphone:
        type: string
      contactPreference:
        type: string
      answer:
        type: string
  
  Credentials:
    type: object
    properties:
      userName:
        type: string
      password:
        type: string
  
  ResponseMessage:
    type: object
    properties:
      messeage:
        type: string
  
  Admin:
    type: object
    properties:
      email:
        type: string
      name:
        type: string
      lastName:
        type: string
      password:
        type: string
      active:
        type: string
      userName:
        type: string
  
paths:
  
  /question:
    x-swagger-router-controller: questionController
    
    get:
      operationId: getTriviaInfo
      summary: An object with content and time to end.
      description: Retrieves the questionof the trivia and the date that it ends.
      tags:
        - mobile app
      
      responses:
        
        200:
          description: A JSON object with question and timeToEnd
          schema:
            $ref: "#/definitions/QuestionInfo"
  
  /winners:
    x-swagger-router-controller: citizenController
    
    get:
      operationId: getWinners
      summary: Retrieves the names of the previous trivia winners.
      description: Returns the names of the winners in an array
      tags:
        - mobile app
      
      responses:
        
        200:
          schema:
            $ref: "#/definitions/Winners"
          description: A JSON object with question and timeToEnd
  
  /answer:
    x-swagger-router-controller: answerController
    
    post:
      operationId: uploadAnswer
      description: Allows the users to send the answer for the trivia alongside their personal info
      tags:
        - mobile app
      
      parameters:
        - in: body
          name: citizenAnswer
          required: true
          description: The info of the citizen with the answer
          schema:
              $ref: "#/definitions/CitizenAnswer"
      
      responses:
        200:
          description: request fulfilled
          schema:
            type: string
        
        503:
          description: there's no trivia at the moment
          schema:
            $ref: "#/definitions/ResponseMessage"
  
  /login:
    x-swagger-router-controller: adminController
    
    post:
      operationId: login
      description: login for admin
      tags:
        - admin site
    
      parameters:
        - in: body
          name: credentials
          required: true
          schema:
            $ref: "#/definitions/Credentials"
      
      responses:
        
        200:
          description: logued in
          schema:
            $ref: "#/definitions/ResponseMessage"
        
        401:
          description: wrong credentials
          schema:
            $ref: "#/definitions/ResponseMessage"
  
  /register:
    x-swagger-router-controller: adminController
    
    post:
      operationId: registerAdmin
      description: registers a new admin
      tags:
        - admin site
      
      parameters:
        - in: body
          name: admin
          schema:
            $ref: "#/definitions/Admin"
      
      responses:
        
        201:
          description: ok
          schema:
            $ref: "#/definitions/ResponseMessage"
        
        default:
          description: An error ocurred
          schema:
            $ref: "#/definitions/ResponseMessage"